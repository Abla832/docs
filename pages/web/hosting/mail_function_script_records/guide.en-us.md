---
title: "Monitoring and managing automated emails in your Web Hosting plan"
slug: web_hosting_monitoring_automatic_emails
excerpt: "Find out how to monitor and manage automated emails sent from your OVHcloud Web Hosting plan"
section: Troubleshooting
order: 09
---

**Last updated 12th October 2022**

## Objective

Automated emails are messages sent via scripts. Usually using PHP's "mail()" function. For example, they are used for your website’s contact form, and allow your visitors to send you messages.

> [!primary]
>
> This guide mainly applies to emails sent from scripts located on your [OVHcloud web hosting](https://www.ovhcloud.com/en/web-hosting/) using PHP's "mail()" function.
>
> If you would like to manage the email addresses included in your MX Plan package or in your [OVHcloud web hosting plan](https://www.ovhcloud.com/en/web-hosting/){.external} package, please refer to our [MX Plan](https://docs.ovh.com/us/en/emails/) documentation.
>

> [!success]
>
> Although we strongly recommend using PHP's "mail()" function, you can also send emails from your shared hosting by going through a script using [Simple Mail Transfer Protocol (SMTP)](#SMTP).
>

**Find out how to monitor and manage automated emails sent from your OVHcloud web hosting plan.**

# Requirements

- Have an [OVHcloud web hosting](https://www.ovhcloud.com/en/web-hosting/){.external} solution.
- Log in to your [OVHcloud Control Panel](https://ca.ovh.com/auth/?action=gotomanager&from=https://www.ovh.com/world/&ovhSubsidiary=ws){.external}.

## In practice

You can monitor and manage automated emails from your OVHcloud Web Hosting plan in your [OVHcloud Control Panel](https://ca.ovh.com/auth/?action=gotomanager&from=https://www.ovh.com/world/&ovhSubsidiary=ws){.external}. Once you have logged in, go to the `Web cloud`{.action} section, click on `Hosting plan`{.action}, then select the relevant hosting plan from the list. Then click on the `More`{.action} tab, then `Email scripts`{.action}.

![hosting](images/monitoring-automatic-emails-step1.png){.thumbnail}

The page that opens will enable you to monitor and manage automated emails sent from your [OVHcloud web hosting](https://www.ovhcloud.com/en/web-hosting/).

### Overview of the “Email scripts” section

![hosting](images/Interface.png){.thumbnail}

The page displays several pieces of information that you can use to view automated email activity generated from your scripts:

- **Service status**: the current status of the service sending automated emails from your web hosting plan:
    - If it is green (*"Enabled"* or *"Force"*), it means that the outgoing is operational. 
    - If it is red (*“Disabled”*, *“Bounce”* or *“SPAM”*), the sending will stop. <br>

    Depending on this status, the outgoing process will be different.

- **Error report to**: receive it daily on the email address of your choice. Set it by clicking the `Change recipient`{.action} button. This report will include emails sent from your web hosting plan that bounced back with an error at OVHcloud. A `Emails with errors`{.action} button also allows you to view these reports at any time on the right of the `Email scripts`{.action} page.
- **Total emails sent**: the total number of automated emails sent since you created your OVHcloud web hosting plan.
- **Emails sent today**: total number of automated emails sent today only.
- **Total number of emails with errors**: the total number of automated emails sent since you created your Web Hosting plan that returned an error to OVHcloud.
- **Sent email history**: graph showing the log of emails sent from your web hosting plan over the previous days.

On the right, there are several buttons you can use to manage automated emails sent from your Web Hosting plan. Depending on the service status, some options may not be available.

- **Block sending**: blocks the distribution of automated emails from your Web Hosting plan. The emails generated by your scripts after the blocking will not be sent, but will be stored in a queue for a maximum of 72 hours.
- **Unblock sending**: unblocks the sending of automated emails from your Web Hosting plan. The emails in the queue will also be redistributed.
- **Purge emails**: clears the emails in the queue and unblocks the sending of emails.

To perform the desired action, click the corresponding button, then click `Confirm`{.action}. In some cases, the desired action may take several minutes to be fully effective.

> [!primary]
>
> To avoid unwanted use of automated emails from your Web Hosting plan, we strongly recommend setting up a security system, such as a captcha in the forms on your website that send emails (a contact form, for example).
>

If you notice that the emails generated from your scripts are no longer sent, but the service status still allows the emails to be sent (*“Enabled”* or *“Force”*), we recommend:

- **check the scripts sending the email**: the scripts may not be able to send the emails due to a syntax error. Check the content of your scripts, correct them if necessary, then try again.

- **test email sending via test script**: create a test script that sends an email to your personal email address using the following code:

```bash
<?php
$to = "RecipientEmail@adress.tld"; 
$subject = "Test mail PHP"; 
$content = "The body/content of the Email";
$headers = "From: Website <SendingEmail@address.tld>\r\nReply-To: SendingEmail@address.tld";

if (mail($to, $subject, $content, $headers))
echo "The email has been sent successfully!";
else
echo "Email did not leave correctly!";
?>
```

For `$headers`, enter the same sending email address twice.

If you receive correctly the message *The email has been sent successfully!* on the email address you have defined in line `$to`, this indicates that the scripts sending your emails contain errors.

- **Make sure that your outgoing messages do not use an SMTP server**: Do not specify an SMTP server in your script parameters when using the PHP "mail()" function. If you have an interface for managing emails from your website, change this setting in your website’s configuration.

- **Check the total size of your email**: The email sent must not exceed the total size of **10 MB** (encapsulation and header included). The content of your email must not exceed **7/8 MB**.

### Manage "Disabled", "Bounce" and "SPAM" states

### The "Disabled" status

This state occurs when:

- too many emails were sent very quickly
- too many emails are returned in error
- You have yourself disabled the feature from your [OVHcloud Control Panel](https://ca.ovh.com/auth/?action=gotomanager&from=https://www.ovh.com/world/&ovhSubsidiary=ws).

To unblock the situation, go to the `Web cloud`{.action} section, click on `Hosting plan`{.action}, then select the relevant hosting plan from the list. Then click on the `More`{.action} tab, then `Email scripts`{.action}.

Then click `Unblock sending`{.action}, and wait a few minutes for the sending service to become active again.

### The "Bounce" status

This state occurs when a certain percentage of your emails sent automatically return with errors.

To unblock the situation, go to the `Web cloud`{.action} section, click on `Hosting plan`{.action}, then select the relevant hosting plan from the list. Then click on the `More`{.action} tab, then `Email scripts`{.action}.

There are two options:

- If you click on `Unblock sending`{.action}, the service status will change to *"Force"*. The ratio of **returned emails to the total number of sent emails** authorised before a block will be doubled. The shipment will be operational again a few minutes after the unblocking.
- If you click on `Purge Emails`{.action}, this will erase all emails from the queue and the service status will change back to *"Enabled"* without doubling the ratio.

### The "SPAM" report

This state occurs when spam emails are sent from your hosting.

Generally, this block is accompanied by the sending of an email titled **“Abuse with your domain.tld hosting”** generated automatically by our security robots:

![hosting](images/AbuseMail.png){.thumbnail}

There are three possible scenarios for this situation:

- **Case 1: robot operation of a contact form**:

To resolve this issue, you will need to secure all scripts that can send emails from your hosting space, using a "Captcha" type system.

Go to the `Web cloud`{.action} section, click on `Hosting plan`{.action} then select the relevant hosting plan from the list. Then click on the `More`{.action} tab, then `Email scripts`{.action}.

Then click `Purge Emails`{.action}, this will erase all emails from the queue and the service status will change back to *"Enabled"*.

In this case, a purge is required to delete the SPAM that is waiting to be sent.

- **Case 2: injecting malicious files into your hosting system**:

To correct this, you must do at least the following:

- Analyse [your hosting logs](https://docs.ovh.com/us/en/hosting/shared_view_my_websites_logs_and_statistics/) to identify security vulnerabilities and infected files.
- Delete or correct the malicious file(s)/module(s).
- For CMSs (WordPress, Joomla!, PrestaShop, Drupal, ...), update the CMS, plugin(s) and associated theme.
- Secure your contact forms with a captcha.

If you are using a CMS, use the “official” plugin(s)/theme(s) instead.
Update the CMS, plugins and associated theme as regularly as possible to avoid this happening again.

Once you have secured your hosting plan, go to the `Web cloud`{.action} section, click on `Hosting plan`{.action} then select the concerned hosting plan from the list. Then click on the `More`{.action} tab, then `Email scripts`{.action}.

Then click `Purge Emails`{.action}, this will erase all emails from the queue and the service status will change back to *"Enabled"*.

In this case, a purge is required to delete the SPAM that is waiting to be sent.

- **Case 3: Sending of legitimate emails considered as SPAM**:

If you are the originator of the emails that caused the block, below are some examples of **uses to avoid** when sending an email (so that it is not considered too "easily" as a SPAM):

- 3 or more words in upper case in the subject/subject of the email.
- No subject/text entered in the email.
- The e-mail only contains an image larger than 1 MB and a few words.
- The subject of the email starts with: Hi, FREE, BUY, BUYING,....
- The email contains more than 70% white (abuse of the "SPACE" or "ENTER" key on the keyboard).
- The font used to write the email is extremely large.
- The writing colour and the background colour are the same for writing the email.
- The public IP address (IP of your internet access point for example) is listed with reputable organisations.
- The header of the sent email does not respect the RFC "emails" (norms or standards email).
- The link(s) in the email are incorrect.
- A URL in the email is not secure (example: declared as `https://`, while the URL only exists as `http://`)
- The e-mail contains terms of a pornographic nature or similar.
- The email contains an executable (EXE, BAT, PIF, XML, XLSX or documents with "macros"), even if it is "zipped".

If your service is still in a *“SPAM”* state, reply to the automatic email you received, specifying that you have taken the necessary measures.

Our anti-spam service will analyse the situation, and our support team will get back to you to explain the unblock procedure.

### Send emails using an "SMTP" script <a name="SMTP"></a>

> [!warning]
>
> OVHcloud provides services that you are responsible for with regard to their configuration and management. It is therefore your responsibility to ensure that they function properly.
> 
> We will provide you with the next section to help you with common tasks. Nevertheless, we recommend contacting a [specialist provider](https://partner.ovhcloud.com/en/) if you encounter any difficulties. We will not be able to assist you. You can find more information in the ["Go further"](#go-further) section of this guide.
>

Although we strongly recommend using PHP’s "mail()" function, shared hosting allows you to send emails via a script that uses Simple Mail Transfer Protocol (SMTP). The total size of your email can not exceed **10 MB** (i.e. **7/8 MB excluding encapsulation**).

> [!warning]
> 
> Emails sent with a script that uses an SMTP configuration cannot be managed and tracked from your [OVHcloud Control Panel](https://ca.ovh.com/auth/?action=gotomanager&from=https://www.ovh.com/world/&ovhSubsidiary=ws).
> 

To do this, you can use the following script by replacing only the `Host`, `Username` and `Password` values with your own SMTP settings:

```bash
$mail->Host = "your.smtp.server";
$mail->SMTPAuth = true; 
$mail->SMTPSecure = "ssl";
$mail->Port = 465; 
$mail->Username = "e-mail@adress.tld"; 
$mail->Password = "YourEmailPassword"; 
```

> [!primary]
>
> If you use an OVHcloud email address and only in this case, you can also use the `SMTPSecure` *"startls"* or *"tls"* with the `Port` **587**. However, the `SMTPSecure` *"ssl"* with the `Port` **465** should be preferred.
> 

## Go further <a name="go-further"></a>  

[View your hosting logs](https://docs.ovh.com/us/en/hosting/shared_view_my_websites_logs_and_statistics/)

[Fix the 403 Forbidden page that appears on your website](https://docs.ovh.com/us/en/hosting/diagnostic-403-forbidden/)

[Restore your web hosting plan’s FTP storage space](https://docs.ovh.com/gb/en/hosting/restoring-ftp-filezilla-control-panel/)

For specialised services (SEO, development, etc.), contact [OVHcloud partners](https://partner.ovhcloud.com/en/).

If you would like assistance using and configuring your OVHcloud solutions, please refer to our [support offers](https://www.ovhcloud.com/en/support-levels/).

Join our community of users on <https://community.ovh.com/en/>.